<mat-tab-group (selectedIndexChange)="dataService.setSelectedTab($event)" animationDuration="0">
  <mat-tab *ngFor="let tabIndex of dataService.tabs" label="#Board {{tabIndex + 1}}">
    <div class="clipboard"
         (click)="newNote($event)"
         (drop)="dropFile($event)" customDragDrop
         (contextmenu)="onRightClick($event)">
      <ng-container *ngFor="let note of dataService.notes$ | async">
        <note cdkDrag class="draggable-note"
              (cdkDragEnded)="saveItemPosition($event, note)"
              [style.top.px]="note.posY - 49"
              [style.left.px]="note.posX"
              [style.zIndex]="note.posZ"
              [note]="note"></note>
      </ng-container>
      <div cdkDropListGroup>
        <ng-container *ngFor="let taskList of dataService.taskLists$ | async">
          <task-list cdkDrag class="draggable-note"
                     (cdkDragEnded)="saveItemPosition($event, taskList)"
                     [style.top.px]="taskList.posY - 49"
                     [style.left.px]="taskList.posX"
                     [style.zIndex]="taskList.posZ"
                     [taskList]="taskList"></task-list>
        </ng-container>
        <ng-container *ngFor="let image of dataService.images$ | async">
          <image cdkDrag class="draggable-note"
                 (cdkDragEnded)="saveItemPosition($event, image)"
                 [style.top.px]="image.posY - 49"
                 [style.left.px]="image.posX"
                 [style.zIndex]="image.posZ"
                 [image]="image"></image>
        </ng-container>
      </div>
    </div>
  </mat-tab>
</mat-tab-group>

<div style="visibility: hidden; position: fixed"
     [style.left.px]="rightClickPosX"
     [style.top.px]="rightClickPosY"
     [matMenuTriggerFor]="contextMenu">
</div>
<mat-menu #contextMenu="matMenu">
  <button mat-menu-item (click)="dataService.addTab()">
    <mat-icon>add</mat-icon>
    Add new tab
  </button>
  <button mat-menu-item (click)="dataService.removeTab()">
    <mat-icon>close</mat-icon>
    Close tab
  </button>
  <button mat-menu-item (click)="openNewNoteDialog()">
    <mat-icon>note</mat-icon>
    Create note
  </button>
  <button mat-menu-item (click)="openNewTaskListDialog()">
    <mat-icon>list</mat-icon>
    Create task list
  </button>
  <button mat-menu-item (click)="clearAll()">
    <mat-icon>delete</mat-icon>
    Delete all
  </button>
</mat-menu>

<div class="fab-container">
  <button mat-mini-fab color="accent" matTooltip="Save as" matTooltipPosition="left"
          (click)="saveAs(); $event.stopPropagation()" class="save-as-button"
          [disabled]="!dataService.itemsCount">
    <mat-icon>save_as</mat-icon>
  </button>
  <button mat-fab color="primary" matTooltip="Save notes.json to downloads" matTooltipPosition="left"
          (click)="save(); $event.stopPropagation()"
          [disabled]="!dataService.itemsCount">
    <mat-icon [matBadge]="dataService.selectedItemsCount ? dataService.selectedItemsCount : ''"
              matBadgeColor="accent" matBadgeOverlap="false" matBadgeSize="large">
      save
    </mat-icon>
  </button>
</div>

<a target="_blank" class="startup-logo" (click)="showAboutDialog()">
  <span style="margin-right: 12px">Clip</span>
  <img src="favicon.ico" height="120" alt="#" style="transform: translateY(-4px)">
  <span style="margin-left: 12px">board</span>
</a>

<img alt="hashy" [class.show-hashy-bg]="hashy.showHashy | async"
     class="hashy hashy-bg" src="assets/hashy-bg.svg" height="124">
<img alt="hashy" [class.show-hashy]="hashy.showHashy | async"
     class="hashy" src="assets/hashy-fg.svg" height="154">
