<div class="clipboard" [ngClass]="isDragging ? 'drag-over' : ''"
     (click)="newNote($event)"
     (drop)="onDrop($event)"
     (contextmenu)="onRightClick($event)">
  <button mat-fab color="primary" matTooltip="Save notes.json to downloads" matTooltipPosition="left"
          (click)="save(); $event.stopPropagation()"
          [disabled]="!(notes$ | async)?.length && !(taskLists$ | async)?.length && !(images$ | async)?.length">
    <mat-icon>save</mat-icon>
  </button>
  <ng-container *ngFor="let note of notes$ | async">
    <note cdkDrag class="draggable-note"
          (cdkDragEnded)="saveItemPosition($event, note)"
          [style.top.px]="note.posY"
          [style.left.px]="note.posX"
          [note]="note" [notes$]="notes$"></note>
  </ng-container>
  <ng-container *ngFor="let image of images$ | async">
    <image cdkDrag class="draggable-note"
           (cdkDragEnded)="saveItemPosition($event, image)"
           [style.top.px]="image.posY"
           [style.left.px]="image.posX"
           [image]="image" [images$]="images$"></image>
  </ng-container>
  <div cdkDropListGroup>
    <ng-container *ngFor="let taskList of taskLists$ | async">
      <task-list cdkDrag class="draggable-note"
                 (cdkDragEnded)="saveItemPosition($event, taskList)"
                 [style.top.px]="taskList.posY"
                 [style.left.px]="taskList.posX"
                 [taskList]="taskList" [taskLists$]="taskLists$"></task-list>
    </ng-container>
  </div>
</div>

<div style="visibility: hidden; position: fixed"
     [style.left.px]="rightClickPosX"
     [style.top.px]="rightClickPosY"
     [matMenuTriggerFor]="contextMenu">
</div>
<mat-menu #contextMenu="matMenu">
  <button mat-menu-item (click)="openNewNoteDialog()">
    <mat-icon>note</mat-icon>
    Create note
  </button>
  <button mat-menu-item (click)="openNewTaskListDialog()">
    <mat-icon>list</mat-icon>
    Create task list
  </button>
</mat-menu>

<a mat-icon-button class="donate-button" color="primary"
   href="https://www.buymeacoffee.com/jensmeichler" target="_blank"
   (click)="$event.stopPropagation()" matTooltip="Donate" matTooltipPosition="above">
  <mat-icon>favorite</mat-icon>
</a>

<h1 class="startup-logo">
  <span style="margin-right: 12px">Clip</span>
  <img src="favicon.ico" height="120" alt="#" style="transform: translateY(-4px)">
  <span style="margin-left: 12px">board</span>
</h1>

<img alt="hashy" class="hashy" src="assets/hashy.png" height="154">
