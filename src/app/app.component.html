<div class="clipboard" [ngClass]="isDragging ? 'drag-over' : ''"
     (click)="newNote($event)"
     (drop)="onDrop($event)"
     (contextmenu)="onRightClick($event)">
  <button mat-fab color="primary"
          (click)="save(); $event.stopPropagation()"
          [disabled]="!(notes$ | async)?.length && !(taskLists$ | async)?.length">
    <mat-icon>save</mat-icon>
  </button>
  <ng-container *ngFor="let note of notes$ | async">
    <note cdkDrag cdkDragBoundary=".clipboard"
          [style.top.px]="note.posY"
          [style.left.px]="note.posX"
          [note]="note" [notes$]="notes$"></note>
  </ng-container>
  <ng-container *ngFor="let taskList of taskLists$ | async">
    <task-list cdkDrag cdkDragBoundary=".clipboard"
               [style.top.px]="taskList.posY"
               [style.left.px]="taskList.posX"
               [taskList]="taskList" [taskLists$]="taskLists$"></task-list>
  </ng-container>
</div>

<div style="visibility: hidden; position: fixed"
     [style.left.px]="rightClickPosX"
     [style.top.px]="rightClickPosY"
     [matMenuTriggerFor]="contextMenu">
</div>
<mat-menu #contextMenu="matMenu">
  <button mat-menu-item (click)="openNewNoteDialog()">
    <mat-icon>note</mat-icon>
    Create note
  </button>
  <button mat-menu-item (click)="openNewTaskListDialog()">
    <mat-icon>list</mat-icon>
    Create task list
  </button>
</mat-menu>

<a mat-icon-button class="donate-button" color="primary"
   href="https://www.buymeacoffee.com/jensmeichler" target="_blank"
   (click)="$event.stopPropagation()">
  <mat-icon>favorite</mat-icon>
</a>
